<frame posn="85 82.5 0" id="[total]">

  <quad posn="20 -10" sizen="8 8" halign="center" valign="center" scriptevents="1" id="[help]hover" style="UIConstruction_Buttons" substyle="Help" />
  <frame id="[help]toshow" hidden="1">
    <quad posn="0 -25 -1" halign="center" valign="center" bgcolor="000" opacity="0.825" sizen="45 20"/>
    <quad posn="0 -22.5 1" halign="center" valign="center" sizen="40 0.5" bgcolor="fff"/>

    <label posn="-20 -20" halign="left" sizen="40 5" textsize="1" valign="center" text="ServerList$t By Guerro" style="TextButtonBig"/>

    <label posn="0 -28" sizen="35 20" halign="center" valign="center" textsize="0.9" text="This plugin is useful to show servers on the current network" autonewline="1" style="TextButtonBig"/>
  </frame>
  <quad sizen="50 15" halign="center" valign="center" style="Bgs1InRace" bgcolor="000" substyle="Shadow" />
  <quad sizen="25 12" halign="left" valign="center" id="[2]hover_info" scriptevents="true" bgcolor="000" opacity="0"/>
  <quad sizen="25 12" halign="right" valign="center" id="[1]hover_info" scriptevents="true" bgcolor="000" opacity="0"/>



  <frame posn="0 0 15" id="[infoandmx]boxlimit">
    <frame id="[info]name">
      <quad posn="35 2 1" opacity="0.25" sizen="10 10" halign="right" valign="center" style="ManiaPlanetMainMenu" substyle="IconHome" scale="3"/>
      <label posn="21 2 1" sizen="37.5 8" halign="right" valign="center" style="TextButtonBig" textsize="1.25" text="ServerName"/>
      <label posn="21 -2 1" sizen="37.5 8" halign="right" valign="center" style="TextButtonBig" textsize="1.25" text="ServerLogin"/>

      <quad posn="-21.75 2 1" halign="left" valign="center" sizen="4.75 4.75" style="UIConstruction_Buttons" substyle="Stats"/>
      <quad posn="-21.75 -2 1" halign="left" valign="center" sizen="4.75 4.75" style="UIConstruction_Buttons" substyle="ActionMaker"/>
    </frame>
    <frame posn="0 0 1" id="[infoandmx]anim_toshow">
      <quad sizen="47 12" halign="center" valign="center" bgcolor="000" opacity="0.75"/>
      <quad posn="-12 0 1" sizen="10 10" halign="center" valign="center" id="[1]info" style="Icons128x32_1" substyle="Windowed" opacity="1"/>
      <quad posn="12 0 1" sizen="10 10" halign="center" valign="center" id="[2]info" style="Icons64x64_1" substyle="ButtonLeagues"/>
      <quad posn="0 0 1" sizen="1.75 10" halign="center" valign="center" style="Bgs1InRace" substyle="Glow" opacity="1"/>
    </frame>
  </frame>

  <frame posn="0 0 15" id="[infoandmx]limit_toshow">
    <frame posn="0 -42.5 0" id="[infoandmx]click_toshow" scale="0.9">
      <frame id="[infoandmx]scale" scale="0">
        <quad sizen="60.75 85.75" halign="center" valign="center" style="Bgs1InRace" bgcolor="000" substyle="BgButtonShadow" />
        <quad sizen="50 75" halign="center" valign="center" bgcolor="000" opacity="0.8" />
        <frame id="[mx]homeframe" posn="0 27.5 10">
          <quad posn="-13 0 2" sizen="15 15" bgcolor="FFFA" style="UIConstruction_Buttons" substyle="Tools" halign="center" valign="center"/>
          <quad posn="-13 -20.5 2" sizen="15 15" bgcolor="FFFA" style="UIConstruction_Buttons" substyle="ScriptEditor" halign="center" valign="center"/>
          <label posn="9 0 2" sizen="30 20"  style="TextButtonBig" text="$fffEDIT SERVER" valign="center2" halign="center"/>
          <label posn="9 -20.5 2" sizen="30 20"  style="TextButtonBig" text="$fffALL SERVERS" valign="center2" halign="center"/>
          <quad posn="0 0 1" sizen="50 20" bgcolor="FFFA" halign="center" valign="center"/>
          <quad posn="0 -20.5 1" sizen="50 20" scriptevents="1" id="ShowFullListMX" bgcolor="8C8C8CAA" halign="center" valign="center"/>
          <quad sizen="60.75 85.75" halign="center" valign="center" style="Bgs1InRace" bgcolor="000" substyle="BgButtonShadow"  posn="0 -29.5"/>
          <quad sizen="50 75" halign="center" valign="center" bgcolor="000" opacity="0.8"  posn="0 -29.5 0.5" style="Bgs1" substyle="BgGradBottom"/>
          <quad sizen="50 75" halign="center" valign="center" bgcolor="000" opacity="0.8"  posn="0 -29.5"/>
        </frame>
        <frame id="[mx]limit_list">
          <frame id="[mx]list" posn="0 31.75" hidden="0">
            <frame id="[mxlist]updown">
              <!-- SERVER_LIST -->
            </frame>
            <frame id="bottomheader" posn="0 -60">
              <quad posn="0 0 15" sizen="50 22.5" halign="center" valign="center" style="Bgs1InRace" substyle="BgGradBottom"/>
              <quad posn="0 -5 16" sizen="50 17.5" halign="center" valign="center" style="Bgs1InRace" substyle="BgGradBottom"/>
              <quad posn="0 -5 16" sizen="50 17.5" halign="center" valign="center" style="Bgs1InRace" substyle="BgGradBottom"/>
              <quad posn="-15 -8 20" sizen="8 8" halign="center" valign="bottom" colorize="f89" id="CloseListMX" scriptevents="1" style="UIConstruction_Buttons" substyle="Left"/>
              <quad posn="5 -8 20" sizen="8 8" halign="center" id="[mx]up" colorize="9f9" valign="bottom" scriptevents="1" style="UIConstruction_Buttons" substyle="Down"/>
              <quad posn="15 -8 20" sizen="8 8" halign="center" id="[mx]down" colorize="9f9" valign="bottom" scriptevents="1" style="UIConstruction_Buttons" substyle="Up"/>
              <label posn="-4 -6 21" sizen="10 8" halign="center" valign="bottom" style="TextButtonBig" id="[mx]maxpages" text="$i$s$o1/((y))"/>
            </frame>
          </frame>
        </frame>
        <frame id="[info]mapinfo" hidden="1">
          <quad sizen="50 20" posn="0 28.5 1" halign="center" valign="center" image="Picture?.jpg"/>
          <label posn="0 15 2" halign="center" valign="center" text="$s75%"/>
          <quad posn="0 15 1" halign="center" valign="center" sizen="15 12" style="Bgs1" substyle="BgShadow" />
          <quad sizen="50 7.5 0" posn="0 15" halign="center" valign="center" bgcolor="999"/>
          <quad sizen="37.5 7.5" posn="-25 15 0.5" halign="left" valign="center" bgcolor="8F0"/>

          <quad sizen="45 10" halign="center" valign="center" url="#addfavorite=serverlogin" style="Bgs1InRace" substyle="BgHealthBar" />

          <label sizen="30 5" posn="0 8" style="TextButtonBig" halign="center" valign="center" textsize="1" text="ON MX :"/>
          <frame name="award" posn="0">
            <quad sizen="6.75 6.75" posn="-15" halign="center" valign="center" style="Icons128x32_1" substyle="RT_Cup" colorize="f75" />
            <label sizen="30 5" posn="-7" style="TextButtonBig" halign="left" valign="center" textprefix="$f75" text="ADD TO FAV"/>
          </frame>
        </frame>
      </frame>
    </frame>
  </frame>
</frame>

<script>
      <!--
    #Include "AnimLib" as AL
  #Include "TextLib" as TL
  #Include "MathLib" as ML
  
  #Const C_SLFrameAnimTime 250
  #Const C_SLT_FrameAnimTime 400
  #Const C_SLFrameAnim 20
  #Const C_SLFrameAnimToWait 100
  
  ***HoverAnimation_InfoAndMX***
  ***
      if (SLIsHover_InfoAndMX)
      {
        if (!SLSwitchHover_InfoAndMX)
        {
          SLSwitchHover_InfoAndMX = True;
          SLLastHover_InfoAndMX = Now + C_SLFrameAnimToWait;
        }
        SLTransition_InfoAndMX = AL::EaseInSine(Now - SLLastHover_InfoAndMX, 0., 1., C_SLFrameAnimTime);
        SLInfoAndMX_Frame.RelativePosition[1] = 40 - C_SLFrameAnim - SLTransition_InfoAndMX * C_SLFrameAnim;
        SLInfoMap_Frame.RelativePosition[1] = 20 - C_SLFrameAnim - SLTransition_InfoAndMX * C_SLFrameAnim;
      }
      else
      {
        if (SLSwitchHover_InfoAndMX)
        {
          SLSwitchHover_InfoAndMX = False;
          SLLastHover_InfoAndMX = Now + C_SLFrameAnimToWait;
        }
        SLTransition_InfoAndMX = AL::EaseInSine(Now - SLLastHover_InfoAndMX, 1., -1., C_SLFrameAnimTime);
        SLInfoAndMX_Frame.RelativePosition[1] = 40 - C_SLFrameAnim - SLTransition_InfoAndMX * C_SLFrameAnim;
        SLInfoMap_Frame.RelativePosition[1] = 20 - C_SLFrameAnim - SLTransition_InfoAndMX * C_SLFrameAnim;
      }
  ***
  
  ***ClickAnimation_ShowMapInfo***
  ***
      if (SLIsClick_InfoAndMX)
      {
        if (!SLSwitchClick_InfoAndMX)
        {
          SLSwitchClick_InfoAndMX = True;
          SLLastClick_InfoAndMX = Now + C_SLFrameAnimToWait;
        }
        SLTransition_ClickInfoAndMX = AL::EaseInSine(Now - SLLastClick_InfoAndMX, -3., 4., C_SLFrameAnimTime);
        SLTransition_Scale = AL::EaseOutElastic(Now - SLLastClick_InfoAndMX, 0., 1., C_SLFrameAnimTime*3);
        SLboxIAM_Frame.RelativePosition[1] = -2 - C_SLFrameAnim - SLTransition_ClickInfoAndMX * C_SLFrameAnim;
        SLboxIAM_ScaleFrame.RelativeScale = SLTransition_Scale;
      }
      else
      {
        if (SLSwitchClick_InfoAndMX)
        {
          SLSwitchClick_InfoAndMX = False;
          SLLastClick_InfoAndMX = Now + C_SLFrameAnimToWait;
        }
        SLTransition_ClickInfoAndMX = AL::EaseInSine(Now - SLLastClick_InfoAndMX, 1., -4., C_SLFrameAnimTime);
         SLTransition_Scale = AL::EaseOutElastic(Now - SLLastClick_InfoAndMX, 1., -1., C_SLFrameAnimTime*3);
        SLboxIAM_Frame.RelativePosition[1] = -2 - C_SLFrameAnim - SLTransition_ClickInfoAndMX * C_SLFrameAnim;
        SLboxIAM_ScaleFrame.RelativeScale = SLTransition_Scale;
      }
  ***
  
  ***EndRoundAnimation_MapInfo***
  ***
      if (UI.UISequence != CUIConfig::EUISequence::EndRound)
      {
        if (!SLSwitch_EndRound)
        {
          SLSwitch_EndRound = True;
          SLLast_EndRound = Now + C_SLFrameAnimToWait;
        }
        SLTransition_EndRound = AL::EaseInSine(Now - SLLast_EndRound, -2., 3., C_SLT_FrameAnimTime);
        SLTotalFrame.RelativePosition[0] = 125 - C_SLFrameAnim - SLTransition_EndRound * C_SLFrameAnim;
      }
      else
      {
        if (SLSwitch_EndRound)
        {
          SLSwitch_EndRound = False;
          SLLast_EndRound = Now + C_SLFrameAnimToWait;
        }
        SLTransition_EndRound = AL::EaseInSine(Now - SLLast_EndRound, 1., -3., C_SLT_FrameAnimTime);
        SLTotalFrame.RelativePosition[0] = 125 - C_SLFrameAnim - SLTransition_EndRound * C_SLFrameAnim;
      }
  ***
  
  <libraryanim/>
  
  main() {
    declare CMlFrame  SLTotalFrame          = (Page.GetFirstChild("[total]") as CMlFrame);
    
    declare CMlFrame  SLboxIAM_ScaleFrame   = (Page.GetFirstChild("[infoandmx]scale") as CMlFrame);
    declare CMlFrame  SLboxIAM_Frame        = (Page.GetFirstChild("[infoandmx]click_toshow") as CMlFrame);
    declare CMlFrame  SLboxIAM_LimitFrame   = (Page.GetFirstChild("[infoandmx]limit_toshow") as CMlFrame);
  
    declare CMlFrame  SLInfoAndMX_Frame     = (Page.GetFirstChild("[infoandmx]anim_toshow") as CMlFrame);
    declare CMlFrame  SLInfoAndMX_LimitFrame= (Page.GetFirstChild("[infoandmx]boxlimit") as CMlFrame);
    declare CMlFrame  SLInfoMap_Frame       = (Page.GetFirstChild("[info]name") as CMlFrame);
    declare CMlQuad   SLHoverInfo_Quad      = (Page.GetFirstChild("[1]hover_info") as CMlQuad);
    declare CMlQuad   SLHoverMX_Quad        = (Page.GetFirstChild("[2]hover_info") as CMlQuad);
    
    declare CMlQuad   SLShowFullListMX_Quad = (Page.GetFirstChild("ShowFullListMX") as CMlQuad);
    
    declare CMlQuad   SLInfo_Quad           = (Page.GetFirstChild("[1]info") as CMlQuad);
    declare CMlQuad   SLMX_Quad             = (Page.GetFirstChild("[2]info") as CMlQuad);
    
    declare CMlFrame  SLMX_HomeFrame        = (Page.GetFirstChild("[mx]homeframe") as CMlFrame);
    declare CMlFrame  SLMX_ListFrame        = (Page.GetFirstChild("[mx]list") as CMlFrame);
    declare CMlFrame  SLMX_LimitListFrame   = (Page.GetFirstChild("[mx]limit_list") as CMlFrame);
    
    declare CMlFrame  SLInfo_ListFrame      = (Page.GetFirstChild("[info]mapinfo") as CMlFrame);
    declare CMlFrame  SLMX_UpDownFrame      = (Page.GetFirstChild("[mxlist]updown") as CMlFrame);
    
    declare Boolean SLIsHover_InfoAndMX         for LocalUser = False;
    declare Boolean SLSwitchHover_InfoAndMX     for LocalUser = False;
    declare Integer SLLastHover_InfoAndMX       for LocalUser = Now;
    
    declare Boolean SLIsClick_InfoAndMX         for LocalUser = False;
    declare Boolean SLSwitchClick_InfoAndMX     for LocalUser = False;
    declare Integer SLLastClick_InfoAndMX       for LocalUser = Now;
    
    declare Boolean SLSwitch_EndRound           for LocalUser = False;
    declare Integer SLLast_EndRound             for LocalUser = Now;
    
    declare Real SLTransition_InfoAndMX         for LocalUser = 0.;
    declare Real SLTransition_ClickInfoAndMX    for LocalUser = 0.;
    declare Real SLTransition_EndRound          for LocalUser = 0.;
    declare Real SLTransition_Scale             for LocalUser = 0.;
    
    declare Integer SLMX_CurrentPage            for LocalUser = 0;
    declare Integer SLMX_MaxPage                for LocalUser = ((y))-1;
    SLMX_MaxPage = ((y))-1;
    
    declare CMlFrame HelpFrame              = (Page.GetFirstChild("[help]toshow") as CMlFrame);
    declare Boolean SL_HelpHovering for This = False;
    
    declare Boolean SL_ServerListorInfo for LocalUser = False;
    declare Boolean SL_ShowAllServers for LocalUser = False;
    
    declare LabelPages for LocalUser = (Page.GetFirstChild("[mx]maxpages") as CMlLabel);
    
    SLInfo_ListFrame.Hide();
    SLMX_ListFrame.Hide();
    SLMX_HomeFrame.Hide();
    
    SLInfoAndMX_LimitFrame.ClipWindowActive = True;
		SLInfoAndMX_LimitFrame.ClipWindowRelativePosition = <0., 0.>;
		SLInfoAndMX_LimitFrame.ClipWindowSize = <46.5, 11.>;
    
    SLboxIAM_LimitFrame.ClipWindowActive = True;
		SLboxIAM_LimitFrame.ClipWindowRelativePosition = <0., -42.5>;
		SLboxIAM_LimitFrame.ClipWindowSize = <75., 72.5>;
    
    SLMX_LimitListFrame.ClipWindowActive = True;
		SLMX_LimitListFrame.ClipWindowRelativePosition = <0., 0.>;
		SLMX_LimitListFrame.ClipWindowSize = <75., 74.5>;
    
    SLMX_UpDownFrame.RelativePosition[1] = SLMX_CurrentPage*60+0.7;
    
    while(True)
    {
      LibManialink_AnimLoop();
      if (SLMX_CurrentPage < 0) 
      {
        SLMX_CurrentPage = 0;
        LibManialink_Anim("""<frame id="[mxlist]updown" posn="0 {{{SLMX_CurrentPage*60+0.7}}}"/>""", 550, "EaseOutQuad");
      }
      if (SLMX_CurrentPage > SLMX_MaxPage) 
      {
        SLMX_CurrentPage = SLMX_MaxPage;
        LibManialink_Anim("""<frame id="[mxlist]updown" posn="0 {{{SLMX_CurrentPage*60+0.7}}}"/>""", 550, "EaseOutQuad"); 
      }
      LabelPages.SetText("$i$s$o"^SLMX_CurrentPage^"/"^SLMX_MaxPage);
      foreach (Event in PendingEvents)
      {
        if (Event.Type == CMlEvent::Type::MouseOver)
        {
          if (Event.ControlId == "[1]hover_info" || Event.ControlId == "[2]hover_info")
          {
            SLIsHover_InfoAndMX = True;
          }
          if (Event.ControlId == "[1]hover_info")
          {
            SLInfo_Quad.Opacity = 1.;
            SLMX_Quad.Opacity = 0.5;
          }
          if (Event.ControlId == "[2]hover_info")
          {
            SLInfo_Quad.Opacity = 0.5;
            SLMX_Quad.Opacity = 1.;
          }
          if (Event.ControlId == "[help]hover")
          {
            SL_HelpHovering = True;
          }
        }
        else if (Event.Type == CMlEvent::Type::MouseOut)
        {
          if (Event.ControlId == "[1]hover_info" || Event.ControlId == "[2]hover_info")
          {
            SLIsHover_InfoAndMX = False;
          }
          if (Event.ControlId == "[help]hover")
          {
            SL_HelpHovering = False;
          }
        } 
        else if (Event.Type == CMlEvent::Type::MouseClick)
        {
          if (Event.ControlId == "[1]hover_info")
          {
          if (SLIsClick_InfoAndMX && SL_ServerListorInfo) SLIsClick_InfoAndMX = False;
            else SLIsClick_InfoAndMX = True;
            SL_ServerListorInfo = True;
          }
          if (Event.ControlId == "[2]hover_info")
          {
            if (SLIsClick_InfoAndMX && !SL_ServerListorInfo) SLIsClick_InfoAndMX = False;
            else SLIsClick_InfoAndMX = True;
            SL_ServerListorInfo = False;
          }
          if (Event.ControlId == "ShowFullListMX")
          {
            SL_ShowAllServers = !SL_ShowAllServers;
          }
          if (Event.ControlId == "CloseListMX")
          {
            SL_ShowAllServers = False;
          }
          if (Event.ControlId == "[mx]up")
          {
            SLMX_CurrentPage += 1;
            LibManialink_Anim("""<frame id="[mxlist]updown" posn="0 {{{SLMX_CurrentPage*60+0.7}}}"/>""", 550, "EaseOutQuad");
          }
          if (Event.ControlId == "[mx]down")
          {
            SLMX_CurrentPage -= 1;
            LibManialink_Anim("""<frame id="[mxlist]updown" posn="0 {{{SLMX_CurrentPage*60+0.7}}}"/>""", 550, "EaseOutQuad");
          }
        }
      }
      
      if (SL_ServerListorInfo) 
      {
        SLInfo_ListFrame.Show();
        SLMX_HomeFrame.Hide();
        SLMX_ListFrame.Hide();
        SL_ShowAllServers = False;
      }
      else
      {
        SLInfo_ListFrame.Hide();
        SLMX_HomeFrame.Show();
      }
      
      if (SL_ShowAllServers && !SL_ServerListorInfo)
      {
        SLMX_HomeFrame.Hide();
        SLMX_ListFrame.Show();
      }
      else if (!SL_ServerListorInfo)
      {
        SLMX_HomeFrame.Show();
        SLMX_ListFrame.Hide();
      }
      
      if (SL_HelpHovering) HelpFrame.Show();
      else HelpFrame.Hide();
      
      +++HoverAnimation_InfoAndMX+++
      
      +++EndRoundAnimation_MapInfo+++
      
      +++ClickAnimation_ShowMapInfo+++
      
      yield;
    }
  }
--></script>
